---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
// 1. Import the Image component
import { Image } from 'astro:assets';
// 2. Import your logo file (assuming it's at 'src/assets/logo.png')
import logo from '../assets/logo.png'; 
---

<header>
  <nav>
    <!-- 3. Replaced the <h2> text with this logo link -->
    <a href="/" class="logo-link">
      <Image src={logo} alt={SITE_TITLE + " Logo"} />
    </a>

    <!-- This is the new hamburger menu button -->
    <!-- It's hidden on desktop by the CSS -->
    <button class="hamburger-btn" aria-label="Toggle menu" aria-expanded="false">
      <!-- Hamburger Icon -->
      <svg class="icon-menu" viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
        <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" d="M3 12h18M3 6h18M3 18h18"></path>
      </svg>
      <!-- Close (X) Icon -->
      <svg class="icon-close" viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
        <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" d="M18 6L6 18M6 6l12 12"></path>
      </svg>
    </button>

    <div class="internal-links">
      <HeaderLink href="/">Home</HeaderLink>
      <HeaderLink href="/about">About Mindware</HeaderLink>
      <HeaderLink href="/services">Programs</HeaderLink>
      <HeaderLink href="/blog">Blog</HeaderLink>
      <HeaderLink href="/contact">Contact</HeaderLink>
    </div>
    <div class="social-links">
      <!-- Instagram -->
      <a href="https://instagram.com/your-username" target="_blank">
        <span class="sr-only">Follow us on Instagram</span>
        <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
          <path
            fill="currentColor"
            d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2C22,19.4 19.4,22 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8C2,4.6 4.6,2 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4A3.6,3.6 0 0,0 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6A3.6,3.6 0 0,0 16.4,4H7.6M17.2,6A1.2,1.2 0 0,1 18.4,7.2A1.2,1.2 0 0,1 17.2,8.4A1.2,1.2 0 0,1 16,7.2A1.2,1.2 0 0,1 17.2,6M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"
          ></path>
        </svg>
      </a>

      <!-- YouTube -->
      <a href="https://youtube.com/your-channel" target="_blank">
        <span class="sr-only">Subscribe to our YouTube channel</span>
        <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
          <path
            fill="currentColor"
            d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.377.505 9.377.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12 9.545 15.568z"
          ></path>
        </svg>
      </a>

      <!-- LinkedIn -->
      <a href="https://linkedin.com/company/your-company" target="_blank">
        <span class="sr-only">Follow us on LinkedIn</span>
        <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
          <path
            fill="currentColor"
            d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
          ></path>
        </svg>
      </a>
    </div>
  </nav>
</header>
<style>
  header {
    margin: 0;
    padding: 0 1em;
    background-color: var(--color-warning); /* Dark yellow bg */
    box-shadow: 0 2px 8px rgba(var(--black), 5%);
    /* Make header stay above the mobile menu */
    position: relative;
    z-index: 20;
  }
  
  /* 4. REMOVED the old h2 style */

  /* 5. ADDED styles for the new logo link */
  .logo-link {
    display: flex;
    align-items: center;
    padding: 0.5em 0; /* Vertical padding */
    text-decoration: none;
    border-bottom: none;
  }
  
  /* 6. ADDED style to control the logo image size */
  .logo-link :global(img) { /* Targets the <img> inside Astro's component */
    height: 46px; /* Adjust this value to fit your logo */
    width: auto;
  }

  nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  nav a {
    padding: 1em 0.5em;
    color: var(--color-primary); /* Dark text */
    border-bottom: 4px solid transparent;
    text-decoration: none;
  }
  nav a.active {
    text-decoration: none;
    border-bottom-color: var(--accent);
  }
  
  /* 7. ADDED style to prevent logo link from getting active state */
  .logo-link.active {
    border-bottom-color: transparent;
  }

  .social-links,
  .social-links a {
    display: flex;
  }

  /* --- NEW HAMBURGER STYLES --- */
  .hamburger-btn {
    display: none; /* Hidden on desktop */
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    color: var(--color-primary); /* Dark icon to match text */
    z-index: 30; /* Stays above the open menu */
  }

  .icon-close {
    display: none; /* Hidden by default */
  }

  @media (max-width: 720px) {
    /* Hide desktop links */
    .internal-links {
      /* This is the new full-screen menu */
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--color-warning); /* Match header */
      
      /* Center links vertically and horizontally */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .internal-links a {
      /* Make links bigger for mobile */
      font-size: 1.5rem;
      padding: 1rem;
    }

    /* Hide social links (this was already here) */
    .social-links {
      display: none;
    }

    /* Show the hamburger button */
    .hamburger-btn {
      display: block;
    }

    /* --- Toggle logic --- */

    /* When the menu is open, show the internal links */
    nav.is-open .internal-links {
      display: flex;
    }
    
    /* When the menu is open, hide the hamburger icon... */
    nav.is-open .icon-menu {
      display: none;
    }

    /* ...and show the 'X' (close) icon */
    nav.is-open .icon-close {
      display: block;
    }
  }
</style>

<script>
  // Find the button and nav elements
  const btn = document.querySelector('.hamburger-btn');
  const nav = document.querySelector('nav');

  // Add the click event listener
  btn?.addEventListener('click', () => {
    // Toggle the 'is-open' class on the <nav> element
    nav?.classList.toggle('is-open');

    // Toggle aria-expanded for accessibility
    const isExpanded = btn.getAttribute('aria-expanded') === 'true';
    
    // Convert the new boolean value back to a string
    btn.setAttribute('aria-expanded', String(!isExpanded));
  });
</script>